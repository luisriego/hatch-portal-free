CKEDITOR.plugins.add("embed",{icons:"embed",hidpi:!0,requires:"embedbase",init:function(e){var t=CKEDITOR.plugins.embedBase.createWidgetBaseDefinition(e),i=t.init;e.config.embed_provider||CKEDITOR.error("embed-no-provider-url"),CKEDITOR.tools.extend(t,{dialog:"embedBase",button:e.lang.embedbase.button,allowedContent:"div[!data-oembed-url]",requiredContent:"div[data-oembed-url]",providerUrl:new CKEDITOR.template(e.config.embed_provider||""),styleToAllowedContentRules:function(e){return{div:{propertiesOnly:!0,classes:e.getClassesArray(),attributes:"!data-oembed-url"}}},init:function(){i.call(this),e.config.embed_keepOriginalContent||this.on("ready",(function(){this.loadContent(this.data.url,{callback:function(){e.fire("updateSnapshot")}})}))},upcast:function(t,i){var n;if("div"==t.name&&t.attributes["data-oembed-url"]){if(i.url=t.attributes["data-oembed-url"],!e.config.embed_keepOriginalContent)for(;n=t.getFirst();)n.remove();return!0}},downcast:function(e){e.attributes["data-oembed-url"]=this.data.url}},!0),e.widgets.add("embed",t),e.config.embed_keepOriginalContent&&e.filter.addElementCallback((function(e){if("data-oembed-url"in e.attributes)return CKEDITOR.FILTER_SKIP_TREE}))}}),CKEDITOR.config.embed_keepOriginalContent=!1;